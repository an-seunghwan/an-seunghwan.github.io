---
title: "OOV 해결하기 (1)-2"
excerpt: "Byte Pair Encoding 2부 - 실제 데이터 적용하기"
toc: true
toc_sticky: true

author_profile: false

date: 2020-01-07 16:00:00 -0000
categories: 
  - NLP
tags:
  - 
---

지난 게시글에서 BPE와 관련한 논문과 그 개념, 그리고 간단한 코드를 알아보았다.
>[BPE 개념](https://an-seunghwan.github.io/nlp/OOV-%ED%95%B4%EA%B2%B0%ED%95%98%EA%B8%B0-(1)/)
>
>[BPE 논문](https://an-seunghwan.github.io/nlp/Neural-Machine-Translation-of-Rare-Words-with-Subword-Units(%EB%85%BC%EB%AC%B8-%EC%9D%BD%EA%B8%B0)/)

이번 게시글에서는 실제 데이터에 적용하여 그 결과를 확인해보도록 하겠다. 

## 데이터 
* 네이버 영화 리뷰 데이터 'Naver sentiment movie corpus v1.0'
* 출처: [https://github.com/e9t/nsmc](https://github.com/e9t/nsmc)
* 본 글에서는 평가 데이터만을 예시로 사용한다.

## setup
```python
import pandas as pd
import re
from tqdm import tqdm
from konlpy.tag import Okt
from pprint import pprint

DATA_PATH = r'C:\Users\dpelt\Downloads\nsmc-master\nsmc-master'
```

## 파일 읽기
```python
data = pd.read_csv(DATA_PATH + '/' + FILE_NAME, 
                   header=0,
                   delimiter='\t',
                   quoting=3)
# 텍스트 데이터만을 따로 뽑아서 사용
text_data = data['document'][:1000]
text_data.head()
```
```
0                                                  굳 ㅋ
1                                 GDNTOPCLASSINTHECLUB
2               뭐야 이 평점들은.... 나쁘진 않지만 10점 짜리는 더더욱 아니잖아
3                     지루하지는 않은데 완전 막장임... 돈주고 보기에는....
4    3D만 아니었어도 별 다섯 개 줬을텐데.. 왜 3D로 나와서 제 심기를 불편하게 하죠??
Name: document, dtype: object
```

## 한글화 정제
```python
def clean_korean(sent):
    if type(sent) == str:
        h = re.compile('[^가-힣ㄱ-ㅎㅏ-ㅣ\\s]+')
        result = h.sub(' ', sent)
    else:
        result = ''
    return result

clean_text = []
for i in tqdm(range(len(text_data))):
    sent = clean_korean(text_data.iloc[i])
    if len(sent) and sent != ' ': # 비어있는 데이터가 아닌지 확인
        clean_text.append(sent)
```
```
100%|██████████| 1000/1000 [00:00<00:00, 64009.77it/s]
```
```python
pprint(clean_text[:6])
```
```
['굳 ㅋ',
 '뭐야 이 평점들은  나쁘진 않지만  점 짜리는 더더욱 아니잖아',
 '지루하지는 않은데 완전 막장임  돈주고 보기에는 ',
 ' 만 아니었어도 별 다섯 개 줬을텐데  왜  로 나와서 제 심기를 불편하게 하죠 ',
 '음악이 주가 된  최고의 음악영화',
 '진정한 쓰레기']
```
 
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTk3OTM3MTIxMywtMTU1MTYxMjg4MywxMT
kwNDgyMzBdfQ==
-->