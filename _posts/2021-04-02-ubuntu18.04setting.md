---
title: "ubuntu 18.04 LTS DeepLearning Setting"
excerpt: "tensorflow 2.0 GPU를 써보자!"
toc: true
toc_sticky: true

author_profile: false
use_math: true

date: 2021-04-02 20:00:00 -0000
categories: 
  - tensorflow 2.0
tags:
  - GPU
---

	ubuntu 18.04 server 컴퓨터에 deep learning 환경을 구축하는 방법과, 이의 개인적인 정리 목적의 글임을 밝힙니다.

## 1. 제원

```
ubuntu 18.04 
Geforce GTX 1080 Ti
```

## 2. ubuntu 18.04 iso booting USB 준비

## 3. ubuntu 18.04 format

- bios setting: `F12`
- third-party program install: `yes`
- partition:
	- booting disk
	```
	ext4 /boot 1GB
	swap 100GB (99999로 seting)
	ext4 /var 나머지
	```
	- hard disk
	```
	/ 3TB (root 폴더로 /home 등이 설정됨, 전체 용량으로 설정)
	```

## 4. ip 및 ssh 설정

### 1. ip 확인

`ifconfig`

### 2. ssh 설정

```s
$ dpkg -l | grep openssh
ii openssh-client 1:7.6p1-4 amd64 secure shell (SSH) client, for secure access to remote machines
$ sudo apt-get install openssh-server
$ dpkg -l | grep openssh

ii openssh-client 1:7.6p1-4ubuntu0.3 amd64 secure shell (SSH) client, for secure access to remote machines

ii openssh-server 1:7.6p1-4ubuntu0.3 amd64 secure shell (SSH) server, for secure access from remote machines

ii openssh-sftp-server 1:7.6p1-4ubuntu0.3 amd64 secure shell (SSH) sftp server module, for SFTP access from remote machines

jeon@T7610-J:~$ ifconfig

Command 'ifconfig' not found, but can be installed with:

sudo apt install net-tools

jeon@T7610-J:~$ sudo apt install net-tools

Reading package lists... Done

Building dependency tree

Reading state information... Done

The following NEW packages will be installed:

net-tools

0 upgraded, 1 newly installed, 0 to remove and 650 not upgraded.

Need to get 194 kB of archives.

After this operation, 803 kB of additional disk space will be used.

Get:1  [http://kr.archive.ubuntu.com/ubuntu](http://kr.archive.ubuntu.com/ubuntu)  bionic/main amd64 net-tools amd64 1.60+git20161116.90da8a0-1ubuntu1 [194 kB]

Fetched 194 kB in 1s (174 kB/s)

Selecting previously unselected package net-tools.

(Reading database ... 135331 files and directories currently installed.)

Preparing to unpack .../net-tools_1.60+git20161116.90da8a0-1ubuntu1_amd64.deb ...

Unpacking net-tools (1.60+git20161116.90da8a0-1ubuntu1) ...

Processing triggers for man-db (2.8.3-2) ...

Setting up net-tools (1.60+git20161116.90da8a0-1ubuntu1) ...

jeon@T7610-J:~$ ifconfig

enp0s25: flags=4163<UP,BROADCAST,RUNNING,MULTICAST> mtu 1500

inet 172.16.207.107 netmask 255.255.255.0 broadcast 172.16.207.255

inet6 fe80::f943:ee44:bc1d:943e prefixlen 64 scopeid 0x20<link>

ether 34:17:eb:9a:71:56 txqueuelen 1000 (Ethernet)

RX packets 2114388 bytes 3183374817 (3.1 GB)

RX errors 0 dropped 0 overruns 0 frame 0

TX packets 706405 bytes 47944986 (47.9 MB)

TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0

device interrupt 20 memory 0xe7600000-e7620000

enp7s0: flags=4099<UP,BROADCAST,MULTICAST> mtu 1500

ether 34:17:eb:9a:71:9c txqueuelen 1000 (Ethernet)

RX packets 0 bytes 0 (0.0 B)

RX errors 0 dropped 0 overruns 0 frame 0

TX packets 0 bytes 0 (0.0 B)

TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0

device memory 0xe7100000-e71fffff

lo: flags=73<UP,LOOPBACK,RUNNING> mtu 65536

inet 127.0.0.1 netmask 255.0.0.0

inet6 ::1 prefixlen 128 scopeid 0x10<host>

loop txqueuelen 1000 (Local Loopback)

RX packets 1265 bytes 111934 (111.9 KB)

RX errors 0 dropped 0 overruns 0 frame 0

TX packets 1265 bytes 111934 (111.9 KB)

TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0

jeon@T7610-J:~$ sudo nano /etc/ssh/sshd_config

jeon@T7610-J:~$ sudo service ssh start

jeon@T7610-J:~$ ifconfig

enp0s25: flags=4163<UP,BROADCAST,RUNNING,MULTICAST> mtu 1500

inet 172.16.207.107 netmask 255.255.255.0 broadcast 172.16.207.255

inet6 fe80::f943:ee44:bc1d:943e prefixlen 64 scopeid 0x20<link>

ether 34:17:eb:9a:71:56 txqueuelen 1000 (Ethernet)

RX packets 2149482 bytes 3233673753 (3.2 GB)

RX errors 0 dropped 0 overruns 0 frame 0

TX packets 719385 bytes 49034670 (49.0 MB)

TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0

device interrupt 20 memory 0xe7600000-e7620000

enp7s0: flags=4099<UP,BROADCAST,MULTICAST> mtu 1500

ether 34:17:eb:9a:71:9c txqueuelen 1000 (Ethernet)

RX packets 0 bytes 0 (0.0 B)

RX errors 0 dropped 0 overruns 0 frame 0

TX packets 0 bytes 0 (0.0 B)

TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0

device memory 0xe7100000-e71fffff

lo: flags=73<UP,LOOPBACK,RUNNING> mtu 65536

inet 127.0.0.1 netmask 255.0.0.0

inet6 ::1 prefixlen 128 scopeid 0x10<host>

loop txqueuelen 1000 (Local Loopback)

RX packets 1355 bytes 120251 (120.2 KB)

RX errors 0 dropped 0 overruns 0 frame 0

TX packets 1355 bytes 120251 (120.2 KB)

TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0

jeon@T7610-J:~$ sudo ufw enable

Firewall is active and enabled on system startup

jeon@T7610-J:~$ sudo ufw allow 22

Rule added

Rule added (v6)

jeon@T7610-J:~$
```

`_config.yml` 파일을 확인했을 때, 아래와 같이 markdown engine이 `kramdown`으로 되어있어야 한다!

```yml
# Conversion
markdown: kramdown
highlighter: rouge
lsi: false
excerpt_separator: "\n\n"
incremental: false

# Markdown Processing
kramdown:
input: GFM
hard_wrap: false
auto_ids: true
footnote_nr: 1
entity_output: as_char
toc_levels: 1..6
smart_quotes: lsquo,rsquo,ldquo,rdquo
enable_coderay: false
```

(참고: [https://github.com/an-seunghwan/an-seunghwan.github.io/blob/master/_config.yml](https://github.com/an-seunghwan/an-seunghwan.github.io/blob/master/_config.yml))

## 2. _includes/mathjax_support.html 파일 추가하기

`_includes` 폴더에 아래와 같은 내용이 적힌 `mathjax_support.html` 파일을 추가해야한다.

```html
<script type="text/x-mathjax-config">
	MathJax.Hub.Config({
	TeX: {
		equationNumbers: {
		autoNumber: "AMS"
		}
	},
	tex2jax: {
		inlineMath: [ ['$', '$'] ],
		displayMath: [ ['$$', '$$'] ],
		processEscapes: true,
		}
	});
	MathJax.Hub.Register.MessageHook("Math Processing Error",function (message) {
		alert("Math Processing Error: "+message[1]);
	});
	MathJax.Hub.Register.MessageHook("TeX Jax - parse error",function (message) {
		alert("Math Processing Error: "+message[1]);
	});
</script>

<script type="text/javascript" async
	src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
```

(참고: [https://github.com/an-seunghwan/an-seunghwan.github.io/blob/master/_includes/mathjax_support.html](https://github.com/an-seunghwan/an-seunghwan.github.io/blob/master/_includes/mathjax_support.html))

## 3. _layouts/defaut.html 파일 확인하기

_layouts/defaut.html 파일을 확인했을 때, `<head>`와 `</head>` 사이에 아래와 같은 `use_math`와 `mathjax_support.html`에 관한 명령문이 적혀있어야 한다 (코드 첨부가 안되서 아래 제 github link를 참고해 주세요).

(참고: [https://github.com/an-seunghwan/an-seunghwan.github.io/blob/master/_layouts/default.html](https://github.com/an-seunghwan/an-seunghwan.github.io/blob/master/_layouts/default.html))

## 4. _includes/scripts.html 파일 수정하기

가장 중요한 부분인데, 최근까지 잘 되던 수식 입력이 안되는 이유는 이 `scripts.html`파일 때문이었다!!!

`_includes` 폴더의 `scripts.html` 파일에 아래와 같은 코드를 맨 아래에 그대로 추가하면 이제 모든 문제가 해결된다.

```html
<script type="text/javascript" async
	src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML">
</script>

<script type="text/x-mathjax-config">
	MathJax.Hub.Config({
	extensions: ["tex2jax.js"],
	jax: ["input/TeX", "output/HTML-CSS"],
	tex2jax: {
		inlineMath: [ ['$','$'], ["\\(","\\)"] ],
		displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
		processEscapes: true
	},
	"HTML-CSS": { availableFonts: ["TeX"] }
});
</script>
```

(참고: [https://github.com/an-seunghwan/an-seunghwan.github.io/blob/master/_includes/scripts.html](https://github.com/an-seunghwan/an-seunghwan.github.io/blob/master/_includes/scripts.html))

## 5. 추가 - 수식 작성법

### 1. inline 작성

수식을 inline으로 작성할 때는 `$a^2 + b^2 = c^2$` 처럼 적으면 $a^2 + b^2 = c^2$ 이렇게 문장 내에서 써진다.

### 2. outline 작성

수식을 outline으로 작성할 때는 

`$$
a^2 + b^2 = c^2
$$` 

처럼 적으면 

$$
a^2 + b^2 = c^2
$$ 

이렇게 별도의 line에서 써진다.

### 3. outline 수식 정렬

outline 수식을 정렬하고 싶을 때는 
```
$$
\begin{aligned} 
a^2 + b^2 &= c^2 \\ 
E &= M \cdot C^2 \\ 
&= xy + \mathbb{E} 
\end{aligned}
$$
```
처럼 적으면 

$$
\begin{aligned} 
a^2 + b^2 &= c^2 \\ 
E &= M \cdot C^2 \\ 
&= xy + \mathbb{E} 
\end{aligned}
$$

이렇게 정렬되어 수식이 써진다.
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTEwNzM1NjE3MF19
-->